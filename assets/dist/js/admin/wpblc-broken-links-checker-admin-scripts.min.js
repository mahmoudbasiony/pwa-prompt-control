(a=>{a(document).ready(function(){a("#email_notifications").change(function(){a("#email_addresses").prop("disabled",!a(this).is(":checked"))}),a("#all_links, #set_number").change(function(){a("#number_of_links").prop("disabled",a("#all_links").is(":checked"))})}),a(document).on("click","#wpblc-manual-scan",function(e){e.preventDefault(),console.log("Manual scan started...");e=wpblc_broken_links_checker_params.nonce,e={action:"wpblc_broken_links_manual_scan",scan_page_url:wpblc_broken_links_checker_params.scanPageUrl,nonce:e};s(e).then(e=>{console.log(e),"object"==typeof e&&e.hasOwnProperty("success")&&e.success?"string"==typeof e.data?(a(".wpblc-broken-links-checker-links-table").html(e.data),a(".wpblc_export_csv_wrap").show(),a(".wpblc-broken-links-checker-links-table .tablenav-pages a").each(function(){var e=new URL(a(this).attr("href")).searchParams.get("paged"),s=new URL(wpblc_broken_links_checker_params.scanPageUrl);s.searchParams.set("paged",e),a(this).attr("href",s.toString())})):console.error("Error: Unexpected AJAX response",e):console.error("Error: AJAX request failed",e)})}),a(document).on("click","#wpblc-mark-as-fixed.not-fixed",function(e){e.preventDefault(),console.log("Mark as fixed started...");e=wpblc_broken_links_checker_params.nonce;let s=a(this);e={action:"wpblc_broken_links_mark_as_fixed",nonce:e,link:s.data("link"),postId:s.data("post-id")};o(e).then(e=>{console.log(e),"object"==typeof e&&e.hasOwnProperty("success")&&e.success&&"boolean"==typeof e.data&&e.data&&(s.hasClass("fixed")?(s.removeClass("fixed").addClass("not-fixed").html("Mark as Fixed"),s.closest("tr").find(".column-type .status-type").removeClass("fixed").addClass("not-fixed").html("Broken")):(s.removeClass("not-fixed").addClass("fixed").html("Mark as Broken"),s.closest("tr").find(".column-type .status-type").html("Fixed").removeClass("not-fixed").addClass("fixed")))})}),a(document).on("click","#wpblc-mark-as-fixed.fixed",function(e){e.preventDefault(),console.log("Mark as broken started...");e=wpblc_broken_links_checker_params.nonce;let s=a(this);e={action:"wpblc_broken_links_mark_as_broken",nonce:e,link:s.data("link"),postId:s.data("post-id")};n(e).then(e=>{console.log(e),"object"==typeof e&&e.hasOwnProperty("success")&&e.success&&"boolean"==typeof e.data&&e.data&&(s.hasClass("fixed")?(s.removeClass("fixed").addClass("not-fixed").html("Mark as Fixed"),s.closest("tr").find(".column-type .status-type").removeClass("fixed").addClass("not-fixed").html("Broken")):(s.removeClass("not-fixed").addClass("fixed").html("Mark as Broken"),s.closest("tr").find(".column-type .status-type").removeClass("not-fixed").addClass("fixed").html("Fixed")))})}),a(document).on("click",".wpblc-broken-links-checker-faq-item input",function(e){a(this).is(":checked")?a(this).siblings("label").find(".sign").text("-"):a(this).siblings("label").find(".sign").text("+")});let n=async e=>{try{return await a.ajax({url:wpblc_broken_links_checker_params.ajaxUrl,type:"POST",data:e,beforeSend:function(){console.log("Before mark links as broken")},complete:function(){console.log("Complete")}})}catch(e){console.error("Error:",e.statusText)}},s=async e=>{try{return await a.ajax({url:wpblc_broken_links_checker_params.ajaxUrl,type:"POST",data:e,beforeSend:function(){console.log("Sending data..."),t("show"),a(".wpblc-broken-links-checker-links-table").html(""),a(".wpblc_export_csv_wrap").hide()},complete:function(){console.log("Data sent."),t("hide")}})}catch(e){console.error("Error:",e.statusText)}},o=async e=>{try{return await a.ajax({url:wpblc_broken_links_checker_params.ajaxUrl,type:"POST",data:e,beforeSend:function(){console.log("Before mark links as broken")},complete:function(){console.log("Complete.")}})}catch(e){console.error("Error:",e.statusText)}},t=e=>{var s=a(".wpblc-is-scanning");"show"===e?s.show():"hide"===e&&s.hide()}})(jQuery);